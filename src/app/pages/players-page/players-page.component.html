<div class="players-page container container-fluid">
    <app-add-player-form class="add-player-form" [status]="addPlayerStatus()" (refreshPlayers)="retrievePlayers()"
                         (addPlayer)="addPlayer($event)"/>

    <div class="player-list-wrapper">
        @if (isLoadingPlayers()) {
            <mat-spinner/>
        } @else if (hasFailedLoadingPlayers()) {
            <app-error-message class="error-block"
                               (retry)="retrievePlayers()"
                               [hasRetryButton]="true" [errorMessage]="'Failed to load players'"/>
        } @else {
            <div class="total-nb-players">
                Total: {{ nbOfPlayers() }} players
            </div>
            @for (playerSummary of playerSummaries(); track playerSummary.player.id; let i = $index) {
                @if (i !== 0) {
                    <hr class="separator"/>
                }
                <app-player-card
                        (clickOnGame)="navigateToPlayerGamePage(playerSummary.lastPlayedGameId, playerSummary.player.id)"
                        (clickOnPseudo)="navigateToProfilePage(playerSummary.player.id)"
                        [playerSummary]="playerSummary"
                        class="player-card"></app-player-card>
            }

            @if (hasMorePlayersToLoad()) {
                <div (click)="loadMorePlayers()" class="load-more-button">
                    Load more players...
                </div>
            }
        }
    </div>
</div>
